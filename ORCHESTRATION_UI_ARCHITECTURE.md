# Axon Desktop - UI ç¼–æ’æ¶æ„æ·±åº¦åˆ†æ

**ç”Ÿæˆæ—¥æœŸ**: 2026-01-18  
**åˆ†æèŒƒå›´**: ä»£ç†ç¼–æ’ç³»ç»Ÿ UI å±‚

---

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ ¸å¿ƒç»„ä»¶ä½“ç³»](#æ ¸å¿ƒç»„ä»¶ä½“ç³»)
3. [UI æµç¨‹](#ui-æµç¨‹)
4. [æ•°æ®æµä¸çŠ¶æ€ç®¡ç†](#æ•°æ®æµä¸çŠ¶æ€ç®¡ç†)
5. [Canvas å®ç°ç»†èŠ‚](#canvas-å®ç°ç»†èŠ‚)
6. [é…ç½®é¢æ¿æ¶æ„](#é…ç½®é¢æ¿æ¶æ„)
7. [å­ä»£ç†ç›¸å…³](#å­ä»£ç†ç›¸å…³)
8. [å…³é”®äº¤äº’æµ](#å…³é”®äº¤äº’æµ)

---

## æ¦‚è¿°

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     /orchestration è·¯ç”±                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   AgentListPanel  â”‚  â”‚ AgentCanvas  â”‚  â”‚AgentConfigPanel â”‚  â”‚
â”‚  â”‚   (å·¦ä¾§, 220px)   â”‚  â”‚ (ä¸­é—´, flex) â”‚  â”‚ (å³ä¾§, 360px)   â”‚  â”‚
â”‚  â”‚                   â”‚  â”‚              â”‚  â”‚                 â”‚  â”‚
â”‚  â”‚ - Agent åˆ—è¡¨      â”‚  â”‚ - ReactFlow  â”‚  â”‚ - 5 ä¸ª Tabs     â”‚  â”‚
â”‚  â”‚ - æœç´¢å’Œé€‰æ‹©      â”‚  â”‚ - Primary +  â”‚  â”‚ - å®Œæ•´é…ç½®ç¼–è¾‘  â”‚  â”‚
â”‚  â”‚ - åˆ›å»ºæŒ‰é’®        â”‚  â”‚   Subagents  â”‚  â”‚ - ä¿å­˜/åˆ é™¤     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Edges      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚ - æ‹–æ‹½äº¤äº’   â”‚                        â”‚
â”‚                          â”‚ - é€‰ä¸­çŠ¶æ€   â”‚                        â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  "æ·»åŠ å­ Agent" Dialog                               â”‚        â”‚
â”‚  â”‚  - Command æœç´¢ç»„ä»¶                                  â”‚        â”‚
â”‚  â”‚  - å¯ç”¨å­ Agent åˆ—è¡¨ï¼ˆè¿‡æ»¤å·²æ·»åŠ ï¼‰                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å¸ƒå±€æ¨¡å¼** | ResizablePanelGroupï¼ˆæ°´å¹³ï¼‰+ 3 åˆ—å¯è°ƒæ•´å®½åº¦ |
| **æµç¨‹å¯¼å‘** | å·¦â†’ä¸­â†’å³ï¼šé€‰æ‹© â†’ é¢„è§ˆ â†’ é…ç½® |
| **å¯è§†åŒ–** | React Flow v12+ è¿›è¡ŒèŠ‚ç‚¹å’Œè¾¹çš„æ¸²æŸ“ |
| **çŠ¶æ€ç®¡ç†** | Zustand (useOrchestrationStore) + Zustand æŒä¹…åŒ– |
| **å“åº”å¼** | é¢æ¿å¯æ”¶ç¼©ï¼Œæ–­ç‚¹æ™ºèƒ½éšè— |
| **è®¾è®¡é£æ ¼** | Zed æç®€ä¸»ä¹‰ |

---

## æ ¸å¿ƒç»„ä»¶ä½“ç³»

### 1. AgentListPanel (å·¦ä¾§é¢æ¿)

**æ–‡ä»¶**: `src/components/orchestration/AgentListPanel.tsx` (186 è¡Œ)

```typescript
interface AgentListPanelProps {
  onCreateAgent: () => void;           // åˆ›å»ºæ–° Agent
  onSelectAgent: (agent: AgentDefinition) => void;  // é€‰æ‹© Agent
  selectedAgentId?: string | null;     // å½“å‰é€‰ä¸­ Agent ID
}
```

#### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | å®ç° |
|------|------|
| **Agent åˆ—è¡¨** | ScrollArea + map æ¸²æŸ“ |
| **æœç´¢è¿‡æ»¤** | useState(searchQuery) + useMemo è¿‡æ»¤ name/description |
| **Agent é¡¹æ ·å¼** | è‡ªå®šä¹‰å›¾æ ‡ + æ¸å˜èƒŒæ™¯è‰² + é€‰ä¸­é«˜äº® |
| **åŠ è½½çŠ¶æ€** | isLoadingAgents â†’ Loader2 åŠ¨ç”» |
| **ç©ºçŠ¶æ€** | æ—  Agent / æ— æœç´¢ç»“æœ / åˆ›å»ºæç¤º |

#### UI ç»†èŠ‚

```tsx
// é¡¶éƒ¨æ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Botå›¾æ ‡ | Agent åˆ—è¡¨ | +  â”‚  é«˜åº¦: 40px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// æœç´¢æ¡†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” æœç´¢ Agent...        â”‚  é«˜åº¦: 32px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Agent é¡¹ (æ¯é¡¹)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘ Agent Name            â”‚  é«˜åº¦: ~44px
â”‚ ğŸ“„ Agent description    â”‚  padding: 10px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// åº•éƒ¨ç»Ÿè®¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5 ä¸ª Agent              â”‚  é«˜åº¦: 32px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å›¾æ ‡æ˜ å°„

```typescript
const ICON_MAP = {
  Bot,        // é»˜è®¤
  Brain,      // æ¨ç†å‹
  Search,     // æœç´¢å‹
  BookOpen,   // çŸ¥è¯†å‹
  Palette,    // åˆ›æ„å‹
  FileText,   // æ–‡æ¡£å‹
  Eye,        // è§‚å¯Ÿå‹
  Settings2,  // å·¥å…·å‹
};
```

---

### 2. AgentCanvas (ä¸­å¤®ç”»å¸ƒ)

**æ–‡ä»¶**: `src/components/orchestration/AgentCanvas.tsx` (277 è¡Œ)

#### æŠ€æœ¯æ ˆ

- **åº“**: @xyflow/react (React Flow v12)
- **èŠ‚ç‚¹ç±»å‹**: 2 ä¸ªï¼ˆPrimaryAgentNode, SubagentNodeï¼‰
- **æ‹“æ‰‘**: æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰

#### æ•°æ®ç»“æ„

```typescript
// èŠ‚ç‚¹ (Node[])
[
  {
    id: "primary",
    type: "primaryAgent",
    position: { x: 400, y: 100 },  // ä» agent.primaryPosition è¯»å–
    data: {
      config: { mode: "inline", inline: { name, description }, position },
      name, description, isSelected,
      onConfigClick?: () => void
    }
  },
  {
    id: subagent.id,
    type: "subagent",
    position: subagent.position,
    data: {
      config: subagent,
      name: subagent.name || agentInfo?.name || agentId,
      description: subagent.description || agentInfo?.description,
      category: agentInfo?.metadata?.category,
      isSelected: selection.type === "subagent" && selection.id === subagent.id,
      ruleCount: count of delegation rules for this subagent,
      onToggleEnabled: () => {...}
    }
  }
]

// è¾¹ (Edge[])
[
  {
    id: "primary-subagent-1",
    source: "primary",
    target: "subagent-1",
    type: "smoothstep",
    animated: false,
    markerEnd: { type: ArrowClosed, width: 16, height: 16 },
    style: { 
      strokeWidth: 1.5, 
      stroke: "hsl(var(--muted-foreground) / 0.4)",
      strokeDasharray: enabled ? undefined : "5,5",  // ç¦ç”¨æ—¶è™šçº¿
      opacity: enabled ? 1 : 0.5
    }
  }
]
```

#### äº‹ä»¶å¤„ç†

| äº‹ä»¶ | å¤„ç†é€»è¾‘ |
|------|---------|
| **onNodesChange** | ä½ç½®æ‹–æ‹½ â†’ è°ƒç”¨ `updatePrimaryPosition()` æˆ– `updateSubagentPosition()` |
| **onNodeClick** | ç‚¹å‡»èŠ‚ç‚¹ â†’ è°ƒç”¨ `setCanvasSelection({ type, id })` |
| **onPaneClick** | ç‚¹å‡»ç©ºç™½ â†’ è°ƒç”¨ `clearCanvasSelection()` |
| **onMoveEnd** | è§†å£ç§»åŠ¨ â†’ è°ƒç”¨ `updateCanvasViewport(viewport)` |

#### è§†å£é…ç½®

```typescript
{
  defaultViewport: agent.canvasViewport || { x: 0, y: 0, zoom: 1 },
  fitView: true,
  fitViewOptions: { 
    padding: 0.2,
    minZoom: 0.5, 
    maxZoom: 1.5 
  },
  minZoom: 0.3,
  maxZoom: 2,
  nodesDraggable: !readOnly,
  nodesConnectable: false,
  elementsSelectable: true
}
```

#### UI ç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âœš Controls æŒ‰é’®ç»„             â”‚  å³ä¸Šè§’
â”‚   ğŸ—º MiniMap                     â”‚  å³ä¸‹è§’
â”‚   ç‚¹å‡»å³ä¸Šè§’æ·»åŠ å­ Agent æç¤º    â”‚  ä¸­ä¸Š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. AgentConfigPanel (å³ä¾§é…ç½®é¢æ¿)

**æ–‡ä»¶**: `src/components/orchestration/AgentConfigPanel.tsx` (882 è¡Œ)

#### å¸ƒå±€ç»“æ„

```typescript
interface AgentConfigPanelProps {
  agent: AgentDefinition | null;           // å½“å‰ç¼–è¾‘çš„ Agent
  onSave: (agent: AgentDefinition) => void;
  onDelete: (agentId: string) => void;
  onClose: () => void;
}
```

#### Tab ç»„ç»‡

| Tab | åŠŸèƒ½ | è¡Œæ•° |
|-----|------|------|
| **åŸºæœ¬** | åç§°ã€æè¿°ã€å›¾æ ‡ã€é¢œè‰²ã€ç±»åˆ«ã€æˆæœ¬ç­‰çº§ | ~150 |
| **æ¨¡å‹** | æ¨¡å‹é€‰æ‹©ï¼ˆPopover + Commandï¼‰ã€æ˜¾ç¤ºä¿¡æ¯ | ~120 |
| **å‚æ•°** | Temperatureã€Top Pã€Max Tokensã€æ€è€ƒé…ç½®ã€æ¨ç†åŠªåŠ›ç¨‹åº¦ç­‰ | ~200 |
| **æƒé™** | å·¥å…·æƒé™ã€è®¿é—®æ¨¡å¼ï¼ˆç™½/é»‘åå•ï¼‰ã€å·¥å…·åˆ—è¡¨ | ~150 |
| **æç¤ºè¯** | ç³»ç»Ÿæç¤ºè¯ã€è¿½åŠ æç¤ºè¯ | ~50 |

#### æ ¸å¿ƒåŠŸèƒ½

##### åŸºæœ¬ä¿¡æ¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åç§°    [______Agent___] â”‚
â”‚ æè¿°    [___å¤šè¡Œç¼–è¾‘___] â”‚  (min-h-[80px])
â”‚                         â”‚
â”‚ å›¾æ ‡é€‰æ‹© (4 åˆ— grid)     â”‚
â”‚ âš™ï¸ ğŸ§  ğŸ” ğŸ“– ...         â”‚
â”‚                         â”‚
â”‚ é¢œè‰²é€‰æ‹© (4 åˆ— grid)     â”‚
â”‚ [è“] [ç´«] [é’] [ç»¿] ... â”‚
â”‚                         â”‚
â”‚ ç±»åˆ«    [â–¼ æ¢ç´¢ ...]     â”‚
â”‚ æˆæœ¬ç­‰çº§ [â–¼ ä¸­ç­‰æˆæœ¬ ...] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### æ¨¡å‹é€‰æ‹©

```typescript
// ç‰¹æ®Šå¤„ç†ï¼šPopover + Command
<Popover open={modelPopoverOpen} onOpenChange={setModelPopoverOpen}>
  <PopoverTrigger>
    æŒ‰é’®: "anthropic / Claude Sonnet" â–¼
  </PopoverTrigger>
  <PopoverContent w-[300px]>
    <Command>
      <CommandInput placeholder="æœç´¢æ¨¡å‹..." />
      <CommandList>
        {providers.map(provider => (
          <CommandGroup heading={provider.name}>
            {provider.models.map(model => (
              <CommandItem
                onSelect={() => {
                  setModelPopoverOpen(false);
                  // æ™ºèƒ½æ›´æ–°å‚æ•°ï¼š
                  // - temperature: ä» capabilities è¯»å–
                  // - topP: ä» capabilities è¯»å–
                  // - maxTokens: è‡ªåŠ¨è®¡ç®—
                  // - thinking: ä»… Claude å¯ç”¨
                }}
              >
                <Check {...} />
                {model.name}
              </CommandItem>
            ))}
          </CommandGroup>
        ))}
      </CommandList>
    </Command>
  </PopoverContent>
</Popover>

// æ˜¾ç¤ºå½“å‰å€¼
<p className="text-[10px]">
  å½“å‰: <code>anthropic/claude-sonnet-4-5</code>
</p>
```

##### å‚æ•°è°ƒæ•´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å‹èƒ½åŠ›ä¿¡æ¯             â”‚  bg-muted/30 border
â”‚ ä¸Šä¸‹æ–‡çª—å£: 200k tokens â”‚
â”‚ æœ€å¤§è¾“å‡º:   16k tokens  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Temperature
â”Œâ”€â”€â”€â”€[===â—â”€â”€â”€â”€]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  0.3 (range: 0-2, step: 0.1)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Top P
â”Œâ”€â”€â”€â”€[===========â—â”€â”€â”€â”€â”€â”€]â”  1.0 (range: 0-1, step: 0.1)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Max Tokens
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [_____16384__________] â”‚  number input
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•æ€è€ƒ (Claude ä¸“ç”¨)
â”Œâ”€ â˜ å¯ç”¨æ‰©å±•æ€è€ƒâ”€â”€â”€â”€â”€â”€â”€â”€
